@font-face {
  font-family: 'Glass TTY VT220';
  src: url('/fonts/Glass_TTY_VT220.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
  font-display: swap;
}

@layer base {
  :root {
    /* Terminal color palette - WCAG AA accessible */
    /* Pure black background */
    --terminal-black: 0 0% 0%;

    /* Green scale (retro phosphor CRT aesthetic) */
    /* Primary: High contrast text (7:1 contrast ratio on black) */
    --terminal-green: 120 100% 35%;
    /* Dim variant: Secondary text (4.5:1 contrast ratio on black) */
    --terminal-green-dim: 120 70% 25%;
    /* Light variant: Emphasis/glow effect (7:1+ contrast ratio on black) */
    --terminal-green-light: 120 100% 45%;
    /* Glow effect (visual only, not text) */
    --terminal-green-glow: 120 100% 50%;

    /* Amber scale for status indicators */
    --terminal-amber: 36 100% 40%;
    --terminal-amber-light: 36 100% 50%;

    /* Red scale for errors */
    --terminal-red: 0 100% 40%;
    --terminal-red-light: 0 100% 50%;

    /* Semantic tokens */
    --background: var(--terminal-black);
    --foreground: var(--terminal-green);

    --card: 0 0% 5%;
    --card-foreground: var(--terminal-green);

    --popover: 0 0% 5%;
    --popover-foreground: var(--terminal-green);

    /* Primary action buttons */
    --primary: var(--terminal-green);
    --primary-foreground: var(--terminal-black);

    /* Secondary elements */
    --secondary: 0 0% 10%;
    --secondary-foreground: var(--terminal-green);

    /* Muted/disabled state */
    --muted: 0 0% 8%;
    --muted-foreground: var(--terminal-green-dim);

    /* Accent for interactive elements */
    --accent: var(--terminal-green-light);
    --accent-foreground: var(--terminal-black);

    /* Error/destructive actions (7:1 contrast on black) */
    --destructive: var(--terminal-red);
    --destructive-foreground: 0 0% 100%;

    /* Warning/success status */
    --warning: var(--terminal-amber);
    --success: 120 100% 35%;

    --border: 120 40% 20%;
    --input: 0 0% 10%;
    --ring: var(--terminal-green);

    --radius: 0;

    /* Custom terminal effects */
    --glow-intensity: 0 0 10px;
    --scanline-opacity: 0.03;
  }

  .dark {
    --background: var(--terminal-black);
    --foreground: var(--terminal-green);
  }
}

@layer base {
  * {
    border-color: hsl(var(--border));
  }

  html, body, #root {
    height: 100%;
    width: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  body {
    background-color: hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: 'Glass TTY VT220', 'Monaco', 'Consolas', 'Courier New', monospace;
  }

  /* Terminal text glow effect */
  .terminal-text {
    color: hsl(var(--terminal-green));
    text-shadow: 
      0 0 1px hsl(var(--terminal-green)),
      0 0 2px hsl(var(--terminal-green) / 0.8),
      0 0 4px hsl(var(--terminal-green) / 0.4);
  }

  .terminal-text-dim {
    color: hsl(var(--terminal-green-dim));
    text-shadow: 
      0 0 1px hsl(var(--terminal-green-dim) / 0.5);
  }

  /* Scanline effect overlay */
  .scanlines::before {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      hsl(0 0% 0% / var(--scanline-opacity)) 2px,
      hsl(0 0% 0% / var(--scanline-opacity)) 4px
    );
    pointer-events: none;
    z-index: 100;
  }

  /* CRT screen curvature effect */
  .crt-effect {
    position: relative;
  }

  .crt-effect::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(
      ellipse at center,
      transparent 0%,
      transparent 70%,
      hsl(0 0% 0% / 0.3) 100%
    );
    pointer-events: none;
    z-index: 99;
  }

  /* Blinking cursor */
  @keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
  }

  .cursor-blink {
    animation: blink 1s step-end infinite;
  }


  /* Boot animation */
  @keyframes flicker {
    0% { opacity: 0.95; }
    5% { opacity: 1; }
    10% { opacity: 0.9; }
    15% { opacity: 1; }
    100% { opacity: 1; }
  }

  .boot-flicker {
    animation: flicker 0.5s ease-out;
  }

  /* Screen reader only text - visible to assistive tech but hidden visually */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
  }

  /* Selection styling */
  ::selection {
    background: hsl(var(--terminal-green));
    color: hsl(var(--terminal-black));
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--terminal-black));
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--terminal-green-dim));
    border: 1px solid hsl(var(--terminal-black));
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--terminal-green));
  }

  /* WASM output span styles */
  span.room {
    color: hsl(var(--terminal-green));
    text-shadow:
      0 0 1px hsl(var(--terminal-green)),
      0 0 2px hsl(var(--terminal-green) / 0.8);
    font-weight: bold;
  }

  span.object {
    color: hsl(var(--terminal-green-dim));
    text-shadow:
      0 0 1px hsl(var(--terminal-green-dim) / 0.5);
  }

  span.debug {
    color: hsl(var(--terminal-amber));
    text-shadow:
      0 0 1px hsl(var(--terminal-amber) / 0.5);
  }

  span {
    color: hsl(var(--terminal-green));
    text-shadow:
      0 0 1px hsl(var(--terminal-green)),
      0 0 2px hsl(var(--terminal-green) / 0.8),
      0 0 4px hsl(var(--terminal-green) / 0.4);
  }

  pre.ascii-art {
    font-family: 'Glass TTY VT220', 'Monaco', 'Consolas', 'Courier New', monospace;
    white-space: pre;
    overflow-x: auto;
    margin: 0.5em 0;
    padding: 0;
    color: hsl(var(--terminal-green));
    text-shadow:
      0 0 1px hsl(var(--terminal-green)),
      0 0 2px hsl(var(--terminal-green) / 0.8),
      0 0 4px hsl(var(--terminal-green) / 0.4);
  }
}

/* Utility Classes */
@layer utilities {
  /* Display and Layout */
  .hidden {
    display: none;
  }

  .block {
    display: block;
  }

  .flex {
    display: flex;
  }

  .flex-col {
    flex-direction: column;
  }

  .flex-row {
    flex-direction: row;
  }

  .flex-shrink-0 {
    flex-shrink: 0;
  }

  .flex-1 {
    flex: 1;
  }

  .items-center {
    align-items: center;
  }

  .justify-center {
    justify-content: center;
  }

  .justify-between {
    justify-content: space-between;
  }

  /* Spacing - Gap */
  .gap-1 {
    gap: 0.25rem;
  }

  .gap-2 {
    gap: 0.5rem;
  }

  .gap-3 {
    gap: 0.75rem;
  }

  .gap-4 {
    gap: 1rem;
  }

  .gap-6 {
    gap: 1.5rem;
  }

  /* Spacing - Padding */
  .p-2 {
    padding: 0.5rem;
  }

  .p-3 {
    padding: 0.75rem;
  }

  .p-4 {
    padding: 1rem;
  }

  .px-2 {
    padding-left: 0.5rem;
    padding-right: 0.5rem;
  }

  .px-3 {
    padding-left: 0.75rem;
    padding-right: 0.75rem;
  }

  .px-4 {
    padding-left: 1rem;
    padding-right: 1rem;
  }

  .py-1 {
    padding-top: 0.25rem;
    padding-bottom: 0.25rem;
  }

  .py-2 {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }

  .pb-0 {
    padding-bottom: 0;
  }

  .pt-2 {
    padding-top: 0.5rem;
  }

  /* Spacing - Margin */
  .m-0 {
    margin: 0;
  }

  .mr-2 {
    margin-right: 0.5rem;
  }

  .mb-2 {
    margin-bottom: 0.5rem;
  }

  .mb-4 {
    margin-bottom: 1rem;
  }

  .mt-4 {
    margin-top: 1rem;
  }

  .ml-2 {
    margin-left: 0.5rem;
  }

  /* Sizing */
  .w-full {
    width: 100%;
  }

  .h-full {
    height: 100%;
  }

  .max-w-md {
    max-width: 28rem;
  }

  .max-w-lg {
    max-width: 32rem;
  }

  .h-6 {
    height: 1.5rem;
  }

  .w-px {
    width: 1px;
  }

  .w-4 {
    width: 1rem;
  }

  .h-4 {
    height: 1rem;
  }

  .w-5 {
    width: 1.25rem;
  }

  .h-5 {
    height: 1.25rem;
  }

  /* Borders */
  .border {
    border: 1px solid;
  }

  .border-b {
    border-bottom: 1px solid;
  }

  .border-t {
    border-top: 1px solid;
  }

  .border-transparent {
    border-color: transparent;
  }

  .rounded {
    border-radius: 0.25rem;
  }

  /* Positioning */
  .absolute {
    position: absolute;
  }

  .fixed {
    position: fixed;
  }

  .relative {
    position: relative;
  }

  .inset-0 {
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
  }

  .top-0 {
    top: 0;
  }

  .left-0 {
    left: 0;
  }

  .right-0 {
    right: 0;
  }

  .z-50 {
    z-index: 50;
  }

  .z-200 {
    z-index: 200;
  }

  /* Overflow */
  .overflow-auto {
    overflow: auto;
  }

  .overflow-y-auto {
    overflow-y: auto;
  }

  .overflow-x-hidden {
    overflow-x: hidden;
  }

  /* Text */
  .text-xs {
    font-size: 0.75rem;
  }

  .text-sm {
    font-size: 0.875rem;
  }

  .text-lg {
    font-size: 1.125rem;
  }

  .text-left {
    text-align: left;
  }

  .text-center {
    text-align: center;
  }

  .font-bold {
    font-weight: bold;
  }

  .select-none {
    user-select: none;
  }

  .whitespace-pre-wrap {
    white-space: pre-wrap;
  }

  .break-words {
    word-break: break-words;
  }

  .leading-relaxed {
    line-height: 1.625;
  }

  /* Opacity */
  .opacity-0 {
    opacity: 0;
  }

  .opacity-30 {
    opacity: 0.3;
  }

  /* Pointer Events */
  .pointer-events-none {
    pointer-events: none;
  }

  /* Cursor */
  .cursor-pointer {
    cursor: pointer;
  }

  .cursor-not-allowed {
    cursor: not-allowed;
  }

  /* Transitions */
  .transition-all {
    transition-property: all;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }

  .transition-colors {
    transition-property: color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }

  .transition-opacity {
    transition-property: opacity;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 150ms;
  }

  .duration-150 {
    transition-duration: 150ms;
  }

  .duration-200 {
    transition-duration: 200ms;
  }

  .duration-300 {
    transition-duration: 300ms;
  }

  /* Other utilities */
  .outline-none {
    outline: 2px solid transparent;
    outline-offset: 2px;
  }

  .ring-offset-2 {
    outline-offset: 2px;
  }

  .space-y-2 > * + * {
    margin-top: 0.5rem;
  }
}
